# uploader

## Core properties

### The Uploader core module exposes the following properties.


| PROPERTY           | DEFAULT VALUE                                              | DESCRIPTION                                                                                                                                                                                                                                                                                                                                  |
|--------------------|------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| element            | `null`                                                     | The root element of the Core instance. This property has no setter                                                                                                                                                                                                                                                                           |
| status             | `0`                                                        | Returns the current status of the Core instance, use the FilePond.Status enum to determine the status. Has no setter.                                                                                                                                                                                                                        |
| name               | `'uploader'`                                               | The input field name to use                                                                                                                                                                                                                                                                                                                  |
| className          | `null`                                                     | Additional CSS class to add to the root element                                                                                                                                                                                                                                                                                              |
| required           | `false`                                                    | Sets the required attribute to the output field                                                                                                                                                                                                                                                                                              |
| disabled           | `false`                                                    | Sets the disabled attribute to the output field                                                                                                                                                                                                                                                                                              |
| captureMethod      | `null`                                                     | Sets the given value to the capture attribute                                                                                                                                                                                                                                                                                                |
| [files](#files)    | A list of file locations that should be loaded Immediately |
| allowDrop          | `true`                                                     | Enable or disable drag n' drop                                                                                                                                                                                                                                                                                                               |
| allowBrowse        | `true`                                                     | Enable or disable file browser                                                                                                                                                                                                                                                                                                               |
| allowPaste         | `true`                                                     | Enable or disable pasting of files. Pasting files is not supported on all browesrs.                                                                                                                                                                                                                                                          |
| allowMultiple      | `false`                                                    | Enable or disable adding multiple files                                                                                                                                                                                                                                                                                                      |
| allowReplace       | `true`                                                     | Allow drop to replace a file, only works when allowMultiple is false                                                                                                                                                                                                                                                                         |
| allowRevert        | `true`                                                     | Enable or disable the revert processing button                                                                                                                                                                                                                                                                                               |
| allowRemove        | `true`                                                     | When set to `false` the remove button is hidden and disabled                                                                                                                                                                                                                                                                                 |
| allowProcess       | `true`                                                     | Enable or disable the process button                                                                                                                                                                                                                                                                                                         |
| allowReorder       | `true`                                                     | Allow users to reorder files with drag and drop interaction. Note that this only works in single column mode. It also only works on browsers that support pointer events.                                                                                                                                                                    |
| storeAsFile        | `false`                                                    | Tells Core to store files in hidden file input elements so they can be posted along with normal form post. This only works if the browser [supports the DataTransfer constructor](https://caniuse.com/mdn-api_datatransfer_datatransfer), this is the case on Firefox, Chrome, Chromium powered browsers and Safari version 14.1 and higher. |
| forceRevert        | `false`                                                    | Set to true to require the file to be successfully reverted before continuing                                                                                                                                                                                                                                                                |
| maxFiles           | `null`                                                     | The maximum number of files that the pond can handle                                                                                                                                                                                                                                                                                         |
| maxParallelUploads | `2`                                                        | The maxmimum number of files that can be uploaded in parallel                                                                                                                                                                                                                                                                                |
| checkValidity      | `false`                                                    | Set to true to enable custom validity messages. Core will throw an error when a parent form is submitted and it contains invalid files.                                                                                                                                                                                                      |
| itemInsertLocation | `'before'`                                                 | Set to 'after' to add files to end of list (when dropped at the top of the list or added using browse or paste), set to `'before'` to add files at start of list. Set to a compare function to automatically [sort items](https://pqina.nl/filepond/docs/api/instance/properties/#sorting-files) when added                                  |
| itemInsertInterval | `75`                                                       | The interval to use before showing each item being added to the list                                                                                                                                                                                                                                                                         |

### Drag n' Drop

| PROPERTY | DEFAULT VALUE | DESCRIPTION |
| ------------------- | ------------------- | ------------------- |
| dropOnPage | `false` | Core will catch all files dropped on the webpage |
| dropOnElement | `true` | Require drop on the Core element itself to catch the file. |
| dropValidation | `false` | When enabled, files are validated before they are dropped. A file is not added when it's invalid. |
| ignoredFiles | `['.ds_store', 'thumbs.db', 'desktop.ini']` | Ignored file names when handling dropped directories. Dropping directories is not supported on all browsers. |


### Server

| PROPERTY | DEFAULT VALUE | DESCRIPTION |
| ------------------- | ------------------- | ------------------- |
| server | `null` | A [server configuration object](https://pqina.nl/filepond/docs/api/server/) describing how Core should interact with the server. |
| instantUpload | `true` | Immediately upload new files to the server |
| chunkUploads | `false` | Enable chunked uploads, when enabled will automatically cut up files in chunkSize chunks before upload |
| chunkForce | `false` | Force chunks even for files smaller than the set chunkSize |
| chunkSize | `5000000` | The size of a chunk in bytes |
| chunkRetryDelays | `[500,1000,3000]` | Amount of times, and delayes, between retried uploading of a chunk |

### Labels

| PROPERTY                       | DEFAULT VALUE                                                                    | DESCRIPTION                                                                                                                                                |
|--------------------------------|----------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| labelDecimalSeparator          | `undefined`                                                                      | The decimal separator used to render numbers. By default this is determined automatically.                                                                 |
| labelThousandsSeparator        | `undefined`                                                                      | The thousands separator used to render numbers. By default this is determined automatically.                                                               |
| labelIdle                      | `'Drag & Drop your files or <span class="filepond--label-action">Browse</span>'` | Default label shown to indicate this is a drop area. Core will automatically bind browse file events to the element with CSS class .filepond--label-action |
| labelInvalidField              | `'Field contains invalid files'`                                                 | Label shown when the field contains invalid files and is validated by the parent form.                                                                     |
| labelFileWaitingForSize        | `'Waiting for size'`                                                             | Label used while waiting for file size information                                                                                                         |
| labelFileSizeNotAvailable      | `'Size not available'`                                                           | Label used when no file size information was received                                                                                                      |
| labelFileLoading               | `'Loading'`                                                                      | Label used while loading a file                                                                                                                            |
| labelFileLoadError             | `'Error during load'`                                                            | Label used when file load failed                                                                                                                           |
| labelFileProcessing            | `'Uploading'`                                                                    | Label used when uploading a file                                                                                                                           |
| labelFileProcessingComplete    | `'Upload complete'`                                                              | Label used when file upload has completed                                                                                                                  |
| labelFileProcessingAborted     | `'Upload cancelled'`                                                             | Label used when upload was cancelled                                                                                                                       |
| labelFileProcessingError       | `'Error during upload'`                                                          | Label used when something went wrong during file upload                                                                                                    |
| labelFileProcessingRevertError | `'Error during revert'`                                                          | Label used when something went wrong during reverting the file upload                                                                                      |
| labelFileRemoveError           | `'Error during remove'`                                                          | Label used to indicate something went wrong when removing the file                                                                                         |
| labelTapToCancel               | `'tap to cancel'`                                                                | Label used to indicate to the user that an action can be cancelled.                                                                                        |
| labelTapToRetry                | `'tap to retry'`                                                                 | Label used to indicate to the user that an action can be retried.                                                                                          |
| labelTapToUndo                 | `'tap to undo'`                                                                  | Label used to indicate to the user that an action can be undone.                                                                                           |
| labelButtonRemoveItem          | `'Remove'`                                                                       | Label used for remove button                                                                                                                               |
| labelButtonAbortItemLoad       | `'Abort'`                                                                        | Label used for abort load button                                                                                                                           |
| labelButtonRetryItemLoad       | `'Retry'`                                                                        | Label used for retry load button                                                                                                                           |
| labelButtonAbortItemProcessing | `'Cancel'`                                                                       | Label used for abort upload button                                                                                                                         |
| labelButtonUndoItemProcessing  | `'Undo'`                                                                         | Label used for undo upload button                                                                                                                          |
| labelButtonRetryItemProcessing | `'Retry'`                                                                        | Label used for retry upload button                                                                                                                         |
| labelButtonProcessItem         | `'Upload'`                                                                       | Label used for upload button                                                                                                                               |

### SVG Icons

| PROPERTY    | DEFAULT VALUE      | DESCRIPTION                       |
|-------------|--------------------|-----------------------------------|
| iconRemove  | `'<svg>...</svg>'` | The icon used for remove actions  |
| iconProcess | `'<svg>...</svg>'` | The icon used for process actions |
| iconRetry   | `'<svg>...</svg>'` | The icon used for retry actions   |
| iconUndo    | `'<svg>...</svg>'` | The icon used for undo actions    |

### Callbacks

| FUNCTION                                | DESCRIPTION                                                                                                                                                    |
|-----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `oninit()`                              | Core instance has been created and is ready.                                                                                                                   |
| `onwarning(error[, file, status])`      | Core instance throws a warning. For instance when the maximum amount of files has been reached. Optionally receives file if error is related to a file object. |
| `onerror(error[, file, status])`        | Core instance throws an error. Optionally receives file if error is related to a file object.                                                                  |
| `oninitfile(file)`                      | Created file item                                                                                                                                              |
| `onaddfilestart(file)`                  | Started file load                                                                                                                                              |
| `onaddfileprogress(file, progress)`     | Made progress loading a file                                                                                                                                   |
| `onaddfile(error, file)`                | If no error, file has been succesfully loaded                                                                                                                  |
| `onprocessfilestart(file)`              | Started processing a file                                                                                                                                      |
| `onprocessfileprogress(file, progress)` | Made progress processing a file                                                                                                                                |
| `onprocessfileabort(file)`              | Aborted processing of a file                                                                                                                                   |
| `onprocessfilerevert(file)`             | Processing of a file has been reverted                                                                                                                         |
| `onprocessfile(error, file)`            | If no error, Processing of a file has been completed                                                                                                           |
| `onprocessfiles()`                      | Called when all files in the list have been processed                                                                                                          |
| `onremovefile(error, file)`             | File has been removed.                                                                                                                                         |
| `onpreparefile(file, output)`           | File has been transformed by the transform plugin or another plugin subscribing to the prepare_output filter. It receives the file item and the output data.   |
| `onupdatefiles(files)`                  | A file has been added or removed, receives a list of file items                                                                                                |
| `onactivatefile(file)`                  | Called when a file is clicked or tapped                                                                                                                        |
| `onreorderfiles(files, origin, target)` | Called when the files list has been reordered, receives current list of files (reordered) plus file origin and target index.                                   |

### Hooks

| PROPERTY                 | DESCRIPTION                                                                                                                                                      |
|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `beforeDropFile(file)`   | Core is about to allow this item to be dropped, it can be a URL or a File object. Return true or false depending on if you want to allow the item to be dropped. |
| `beforeAddFile(item)`    | Core is about to add this file, return false to prevent adding it, or return a Promise and resolve with true or false.                                           |
| `beforeRemoveFile(item)` | Core is about to remove this file, return false to prevent removal, or return a Promise and resolve with true or false.                                          |

### Styles

| PROPERTY                       | DEFAULT VALUE | DESCRIPTION                                                                                                                                                                                                                                                                                                                  |
|--------------------------------|---------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| stylePanelLayout               | `null`        | Set a different layout render mode. Can be either `'integrated'`, `'compact'`, and/or `'circle'`. Compact mode will remove padding, integrated mode is used to render Core as part of a bigger element. Circle mode adjusts the item position offsets so buttons and progress indicators don't fall outside of the circular shape. |
| stylePanelAspectRatio          | `null`        | Set a forced aspect ratio for the Core drop area. Useful to make the drop area take up a fixed amount of space. For example when cropping a single square image. Accepts human readable aspect ratios like '1:1' or numeric aspect ratios like 0.75.                                                                         |
| styleButtonRemoveItemPosition  | `'left'`      | The position of the remove item button, 'left', 'center', 'right', and/or 'bottom'.                                                                                                                                                                                                                                          |
| styleButtonProcessItemPosition | `'right'`     | The position of the process item button, 'left', 'center', 'right', and/or 'bottom'.                                                                                                                                                                                                                                         |
| styleLoadIndicatorPosition     | `'right'`     | The position of the load indicator, 'left', 'center', 'right', and/or 'bottom'.                                                                                                                                                                                                                                              |
| styleProgressIndicatorPosition | `'right'`     | The position of the progress indicator, 'left', 'center', 'right', and/or 'bottom'.                                                                                                                                                                                                                                          |
| styleItemPanelAspectRatio      | `null`        | Set a forced aspect ratio for the file items. Useful when rendering cropped or fixed aspect ratio images in grid view, this will improve performance as Core will know beforehand the size of the item to render.                                                                                                            |

## Running unit tests

Run `nx test uploader` to execute the unit tests via [Jest](https://jestjs.io).
